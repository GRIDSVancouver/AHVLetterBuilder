<div *ngIf="dataLoaded">
<div class='container'>
  <div class='row'>
    <div class='col-xs-8'>
      <h1>{{project.name}}</h1>
      <markdown-to-html>{{project.description}}</markdown-to-html>
<form (ngSubmit)="generateText()" #letterForm="ngForm">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Your Information</h3>
        </div>
        <div class="panel-body">
          <div class="form-group" [ngClass]="{'has-error': nameInput.invalid && nameInput.dirty}">
            <label for="nameInput">Full Name (required)</label>
            <input [(ngModel)]="name" #nameInput="ngModel" name="fullName" class="form-control"  placeholder="Jane Doe" required/>
            <div [hidden]=" nameInput.valid || nameInput.pristine" class="alert alert-danger">Name is required</div>
          </div>
          <div class=form-group [ngClass]="{'has-error': emailInput.invalid && emailInput.dirty}">
            <label for="emailAddressInput">Email Address (required)</label>
            <input type="email" [(ngModel)]="emailAddress" #emailInput="ngModel" name="emailAddress" class="form-control"  id="emailAddressInput" placeholder="address@domain.com" required email/>
            <div [hidden]=" emailInput.valid || emailInput.pristine" class="alert alert-danger">Please enter a valid email address</div>
          </div>
          <div class=form-group>
            <label for="physicalAddressInput">Address (optional)</label>
            <input [(ngModel)]="physicalAddress" name="physicalAddress" class="form-control"  id="physicalAddressInput" placeholder="1234 Abundant Ave, Vancouver, V5T 6K5" />
          </div>
        </div>
      </div>
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Your relation to the project</h3>
        </div>
        <div class="panel-body">
          <div class="form-check" *ngFor="let reason of relationships">
            <label class="form-check-label"><input type="checkbox" name="relationship"  class="form-check-input"[(ngModel)]="reason.appliesToUser" />{{reason.description}}</label>
          </div>
        </div>
      </div>

      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Why do you support this project?</h3>
        </div>
        <div class="panel-body">
          <div class="form-check" *ngFor="let reason of supportReasons">
            <label class="form-check-label"><input type="checkbox" name="support"  class="form-check-input"[(ngModel)]="reason.appliesToUser" />{{reason.description}}</label>
          </div>
        </div>
      </div>

      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">What do you think could be improved?</h3>
        </div>
        <div class="panel-body">
          <div class="form-check" *ngFor="let reason of improvements">
            <label class="form-check-label"><input type="checkbox" name="improve"  class="form-check-input"[(ngModel)]="reason.appliesToUser" />{{reason.description}}</label>
          </div>
        </div>
      </div>
      <div>
        <button type="submit" class="btn btn-primary" [disabled]="!letterForm.form.valid">Generate Letter</button>
      </div>
      <h4>Generated letter</h4>
      <div><textarea [(ngModel)]="letter" name="letter" placeholder="Your letter goes here" rows="12" cols='90'></textarea></div>
      </form>
    </div>
  </div>
</div>
</div>